<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MBA - IA | Construtor</title>
  <link rel="stylesheet" href="/src/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&family=Poppins:wght@400;500;600;700;800&family=Roboto:wght@400;500;700;900&display=swap"
    rel="stylesheet">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
</head>

<body>
  <div id="app">
    <!-- Header -->
    <header class="top-bar">
      <div class="top-bar-left">
        <a href="/checkout.html" class="btn-top" id="btn-back-checkout" style="text-decoration: none;">
          <svg style="margin-right:4px" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="3">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
          Voltar para o Checkout
        </a>
        <div class="top-bar-divider"></div>
        <button class="btn-icon-top">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <button class="btn-top" style="margin-left: 12px; display: flex; align-items: center; gap: 8px;"
          id="btn-brand-header">
          <div id="header-logo-preview"
            style="width: 28px; height: 28px; border-radius: 6px; background: var(--color-brand-light); display: none; align-items: center; justify-content: center; overflow: hidden; border: 1px solid rgba(79, 70, 229, 0.1);">
          </div>
          <span id="header-brand-name" contenteditable="true" spellcheck="false"
            style="font-weight: 800; color: var(--color-brand);">Meu Formul√°rio</span>
          <svg style="margin-left:4px" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="3">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
      </div>

      <div class="top-bar-center">
        <div class="nav-item active">Construtor</div>
        <div class="nav-item">Guia de estilo</div>
      </div>

      <div class="top-bar-right">
        <button class="btn-icon-top" id="view-desktop" title="Desktop">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
        </button>
        <button class="btn-icon-top" id="view-mobile" title="Mobile">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
            <line x1="12" y1="18" x2="12.01" y2="18"></line>
          </svg>
        </button>
        <div class="top-bar-divider"></div>
        <button class="btn-icon-top" id="undo-btn" title="Desfazer">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M3 7v6h6"></path>
            <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"></path>
          </svg>
        </button>
        <button class="btn-icon-top" id="redo-btn" title="Refazer">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M21 7v6h-6"></path>
            <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3L21 13"></path>
          </svg>
        </button>
        <div class="top-bar-divider"></div>
        <button class="btn-icon-top" id="btn-preview" title="Pr√©via">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
        </button>
        <button class="btn-save-secondary" id="btn-save">Guardar</button>
        <button class="btn-publish-main" id="btn-publish-main">Colocar no Ar üöÄ</button>
      </div>
    </header>


    <!-- Builder Layout -->
    <div class="builder-layout">
      <!-- Sidebar Left: Toolbox -->
      <aside class="sidebar" id="sidebar-left">
        <div class="sidebar-content" id="toolbox-content">
          <!-- Logo + Icons Injected via JS -->
        </div>
      </aside>

      <!-- Main Canvas Area -->
      <main class="canvas-area" id="canvas-content">
        <div class="canvas-guidance-bar">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          Dica: Voc√™ pode <strong>arrastar</strong> os itens para reordenar ou <strong>clicar</strong> nos bot√µes
          laterais para adicionar.
        </div>
        <!-- Canvas wrapper is created by JS as .canvas-paper -->
      </main>

      <!-- Sidebar Right: Settings -->
      <aside class="sidebar-right" id="sidebar-right">
        <div class="sidebar-content" id="properties-content">
          <!-- Injected via JS -->
        </div>
      </aside>
    </div>

    <!-- Modals & Toasts -->
    <div id="loading-overlay" class="overlay" style="display:none;">
      <div class="loader-box">
        <div id="lottie-container" style="width: 120px; height: 120px; margin: 0 auto 20px;">
          <lottie-player id="lottie-player"
            src="https://lottie.host/68224d03-e83e-4b77-8025-06a9d187768e/vD6I5LghkR.json" background="transparent"
            speed="1" style="width: 100%; height: 100%;" loop autoplay></lottie-player>
        </div>
        <p id="loading-text" style="font-size: 20px; font-weight: 800; color: #1E293B;">Montando seu formul√°rio...</p>
        <div id="progress-bar-container"
          style="width: 100%; height: 8px; background: #F1F5F9; border-radius: 10px; margin-top: 24px; overflow: hidden; display: none;">
          <div id="progress-bar"
            style="width: 0%; height: 100%; background: var(--color-brand); transition: width 0.3s ease;"></div>
        </div>
      </div>
    </div>

    <!-- Feedback Overlay (Save/Publish) -->
    <div id="feedback-overlay" class="feedback-overlay">
      <div id="feedback-card" class="feedback-card">
        <!-- Success Screen -->
        <div id="feedback-success-screen" style="display:none;">
          <div class="feedback-icon-container icon-success-bg">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
              stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </div>
          <h3 id="feedback-title">Tudo Pronto!</h3>
          <p id="feedback-msg">Suas mudan√ßas foram guardadas com carinho.</p>
          <div style="display: flex; gap: 12px; width: 100%; margin-top: 8px;">
            <button id="btn-view-page" class="btn-primary-system" style="flex: 1; display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
              Ver P√°gina
            </button>
            <button id="btn-feedback-close" class="btn-secondary-system" style="flex: 1;">Entendido</button>
          </div>
        </div>

        <!-- Publish Logic -->
        <div id="feedback-publish-screen" style="display:none;">
          <div class="feedback-icon-container icon-publish-bg">
            <lottie-player id="publish-lottie"
              src="https://lottie.host/68224d03-e83e-4b77-8025-06a9d187768e/vD6I5LghkR.json" background="transparent"
              speed="1.5" style="width: 100%; height:100%;" loop autoplay></lottie-player>
          </div>
          <h3 id="publish-title">Colocando na Internet...</h3>
          <p id="publish-msg">Estamos preparando tudo para o mundo ver sua p√°gina!</p>
          <div class="publish-progress-bar">
            <div id="publish-progress-fill" class="publish-progress-fill"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <!-- Preview Modal -->
    <div id="preview-modal" class="preview-modal" style="display:none;">
      <div class="preview-modal-overlay"></div>
      <div class="preview-modal-content">
        <button id="btn-close-preview" class="btn-close-preview">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          Fechar Visualiza√ß√£o
        </button>
        <div id="preview-canvas-container"></div>
      </div>
    </div>

    <!-- Custom Field Modal -->
    <div id="custom-field-modal-overlay" class="modal-system-overlay">
      <div class="modal-system-card" style="width: 500px;">
        <div class="modal-system-header">
          <h2>CRIAR NOVA PERGUNTA</h2>
          <p>Escolha o tipo de informa√ß√£o que voc√™ quer pedir</p>
          <button id="btn-close-custom-field-x" class="btn-close-modal-system">√ó</button>
        </div>

        <div class="modal-system-body">
          <div style="margin-bottom: 24px;">
            <label class="prop-label">Tipo de Campo:</label>
            <div class="custom-field-type-grid">
              <div class="field-type-card active" data-type="text">
                <div class="field-type-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M4 7V4h16v3M9 20h6M12 4v16" />
                  </svg>
                </div>
                <span>Texto</span>
              </div>
              <div class="field-type-card" data-type="select">
                <div class="field-type-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="12" y1="3" x2="12" y2="21"></line>
                    <path d="M12 11l4 4-4 4"></path>
                  </svg>
                </div>
                <span>Select</span>
              </div>
              <div class="field-type-card" data-type="checkbox">
                <div class="field-type-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                  </svg>
                </div>
                <span>Check</span>
              </div>
              <div class="field-type-card" data-type="radio">
                <div class="field-type-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <circle cx="12" cy="12" r="10"></circle>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </div>
                <span>Radio</span>
              </div>
              <div class="field-type-card" data-type="list">
                <div class="field-type-icon">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                  </svg>
                </div>
                <span>Lista</span>
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px;">
            <label class="prop-label">C√ìDIGO INTERNO (S√ì VOC√ä V√ä):</label>
            <input type="text" id="custom-field-name" class="prop-input" placeholder="Ex: campo_extra"
              style="margin-bottom:4px;">
            <p style="font-size: 11px; color:#94A3B8; font-weight:600;">Um nome sem espa√ßos para organizar seus dados
            </p>
          </div>

          <div style="margin-bottom: 20px;">
            <label class="prop-label">PERGUNTA QUE VAI APARECER:</label>
            <input type="text" id="custom-field-label" class="prop-input" placeholder="Ex: Qual sua cor favorita?">
          </div>

          <div style="margin-bottom: 20px;">
            <label class="prop-label" id="label-placeholder-dynamic">DICA DENTRO DA CAIXA:</label>
            <input type="text" id="custom-field-placeholder" class="prop-input" placeholder="Ex: Escreva aqui...">
          </div>

          <div style="display:flex; align-items:center; gap:10px; margin-top:10px;">
            <input type="checkbox" id="custom-field-required"
              style="width:18px; height:18px; cursor:pointer; accent-color:#4F46E5;">
            <label for="custom-field-required" style="font-size:14px; font-weight:700; color:#475569; cursor:pointer;">√â
              obrigat√≥rio responder?</label>
          </div>
        </div>

        <div class="modal-system-footer">
          <button id="btn-cancel-custom-field" class="btn-cancel-modal">Cancelar</button>
          <button id="btn-add-custom-field-action" class="btn-save-modal" style="background:#4F46E5;">Adicionar</button>
        </div>
      </div>
    </div>

    <!-- Privacy Modal Custom -->
    <div id="privacy-modal-overlay" class="modal-system-overlay">
      <div class="modal-system-card">
        <div class="modal-system-header">
          <h2>Configurar Avisos Legais</h2>
          <p>Escolha como as pessoas v√£o ler seus termos</p>
          <button id="btn-close-privacy-modal-x" class="btn-close-modal-system">√ó</button>
        </div>

        <div class="modal-system-body">
          <div class="privacy-option-list">
            <!-- Op√ß√£o 1: Texto Edit√°vel -->
            <div class="privacy-option-card" data-source="text" id="card-privacy-text">
              <div class="radio-circle"></div>
              <div class="option-info">
                <div class="option-primary-text">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                  </svg>
                  Texto edit√°vel
                </div>
                <div class="option-sub-text">Escreva ou cole seu texto diretamente aqui. Ideal para pol√≠ticas simples e
                  r√°pidas.</div>
              </div>
            </div>

            <!-- Op√ß√£o 2: Link Externo -->
            <div class="privacy-option-card" data-source="url" id="card-privacy-url">
              <div class="radio-circle"></div>
              <div class="option-info">
                <div class="option-primary-text">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                  </svg>
                  Link externo (URL)
                </div>
                <div class="option-sub-text">Redirecione o usu√°rio para uma p√°gina de pol√≠ticas j√° existente em seu
                  site.
                </div>
              </div>
            </div>

            <!-- Op√ß√£o 3: Selecionar P√°gina -->
            <div class="privacy-option-card active" data-source="page" id="card-privacy-page">
              <div class="radio-circle"></div>
              <div class="option-info">
                <div class="option-primary-text">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                  </svg>
                  Selecionar p√°gina
                </div>
                <div class="option-sub-text">Escolha uma p√°gina de pol√≠ticas criada dentro desta ferramenta.</div>
              </div>
            </div>
          </div>

          <!-- Painel Din√¢mico: Texto -->
          <div id="selection-area-text" class="privacy-selection-area">
            <div class="selection-title">Digite o Conte√∫do</div>
            <textarea id="privacy-text-input-new"
              style="width: 100%; height: 120px; padding: 16px; border: 1.5px solid #E2E8F0; border-radius: 12px; font-family: inherit; font-size: 14px; resize: none; outline: none;"
              placeholder="Sua pol√≠tica aqui..."></textarea>
            <div class="dynamic-vars-container">
              <div class="dynamic-vars-label">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <path d="M4 7V4h16v3M9 20h6M12 4v16" />
                </svg>
                Vari√°veis din√¢micas
              </div>
              <div class="dynamic-vars-list">
                <span class="var-tag" data-tag="[EMPRESA]">[EMPRESA]</span>
                <span class="var-tag" data-tag="[DATA]">[DATA]</span>
                <span class="var-tag" data-tag="[EMAIL_CONTATO]">[EMAIL_CONTATO]</span>
              </div>
            </div>
          </div>

          <!-- Painel Din√¢mico: URL -->
          <div id="selection-area-url" class="privacy-selection-area">
            <div class="selection-title">Link da Pol√≠tica</div>
            <input type="text" id="privacy-url-input-new"
              style="width: 100%; padding: 14px; border: 1.5px solid #E2E8F0; border-radius: 12px; font-size: 14px; outline: none;"
              placeholder="https://seusite.com/termos-de-uso">
          </div>

          <!-- Painel Din√¢mico: P√°ginas -->
          <div id="selection-area-page" class="privacy-selection-area active">
            <div class="selection-title">Selecione uma P√°gina</div>
            <div class="page-item-list" id="privacy-page-item-list">
              <div class="page-item" data-id="p1">Pol√≠tica de Privacidade Padr√£o</div>
              <div class="page-item selected" data-id="p2">Termos de Uso e Condi√ß√µes</div>
              <div class="page-item" data-id="p3">Pol√≠tica de Cookies</div>
              <div class="page-item" data-id="p4">Aviso Legal</div>
            </div>
          </div>
        </div>

        <div class="modal-system-footer">
          <button id="btn-cancel-privacy" class="btn-cancel-modal">Cancelar</button>
          <button id="btn-save-privacy-new" class="btn-save-modal">Salvar Altera√ß√µes</button>
        </div>
      </div>
    </div>

  </div>
  <!-- Custom Alert Modal (System Standard) -->
  <div id="custom-alert-modal" class="modal-system-overlay" style="z-index: 40000;">
    <div class="modal-system-card" style="width: 450px;">
      <div class="modal-system-header">
        <h2 id="alert-title">Visualiza√ß√£o</h2>
        <button id="btn-close-alert-x" class="btn-close-modal-system">√ó</button>
      </div>
      <div class="modal-system-body">
        <p id="alert-message" style="font-size: 15px; color:#475569; line-height:1.6; white-space: pre-wrap;"></p>
      </div>
      <div class="modal-system-footer">
        <button id="btn-close-alert" class="btn-save-modal" style="width: 100%;">Fechar</button>
      </div>
    </div>
  </div>

  <input type="file" id="image-upload-input" accept="image/*"
    style="display:none; visibility:hidden; width:0; height:0;">
  <script type="module" src="/src/main.js"></script>
</body>

</html>